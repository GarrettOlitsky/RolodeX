<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RolodeX App</title>
<style>
  body {
    background-color: #1e1e2f;
    color: #f4f4f4;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    height: 100vh;
    margin: 0;
    transition: background-color 0.3s, color 0.3s;
  }
  #sidebar {
    width: 250px;
    background-color: #292940;
    padding: 10px;
    overflow-y: auto;
  }
  #sidebar h2 {
    text-align: center;
    color: #fff;
  }
  .contact {
    padding: 8px;
    background: #3a3a5c;
    margin: 5px 0;
    cursor: pointer;
    border-radius: 4px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .contact:hover {
    background: #505070;
  }
  .delete-btn {
    color: #ff5c5c;
    font-weight: bold;
    cursor: pointer;
    margin-left: 10px;
    user-select: none;
  }
  #details {
    flex-grow: 1;
    padding: 20px;
    background-color: #2e2e42;
  }
  input, textarea, button {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border: none;
    border-radius: 4px;
  }
  input#contactName {
    width: 50%;
  }
  input#contactAddress,
  input#contactPhone,
  input#contactEmail {
    width: 70%;
  }
  textarea#contactMessage {
    height: 120px;
  }
  button {
    background-color: #4caf50;
    color: white;
    cursor: pointer;
  }
  button:hover {
    background-color: #45a049;
  }
  #settingsCog {
    position: fixed;
    bottom: 10px;
    right: 10px;
    background: #292940;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    color: #f4f4f4;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 22px;
    user-select: none;
  }
  #settingsPanel {
    position: fixed;
    bottom: 60px;
    right: 10px;
    background: #292940;
    border-radius: 8px;
    padding: 15px;
    width: 240px;
    display: none;
    box-shadow: 0 0 10px #0008;
    color: #f4f4f4;
  }
  #settingsPanel label {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
  }
  #settingsPanel button {
    background-color: #e63946;
    margin-top: 10px;
  }
  /* Color Blind Mode Styles */
  body.colorblind {
    background-color: #000 !important;
    color: #ffff00 !important;
  }
  body.colorblind #sidebar {
    background-color: #003300 !important;
  }
  body.colorblind .contact {
    background-color: #004d00 !important;
  }
  body.colorblind .contact:hover {
    background-color: #006600 !important;
  }
  body.colorblind #details {
    background-color: #002200 !important;
  }
  body.colorblind button {
    background-color: #ffcc00 !important;
    color: #000 !important;
  }
  body.colorblind button:hover {
    background-color: #ffdb4d !important;
  }
  body.colorblind #settingsCog {
    background-color: #003300 !important;
    color: #ffff00 !important;
  }
  body.colorblind #settingsPanel {
    background-color: #003300 !important;
    color: #ffff00 !important;
  }
</style>
</head>
<body>
  <div id="sidebar">
    <h2>RolodeX</h2>
    <input type="text" id="search" placeholder="Search..." oninput="renderContacts()" />
    <div id="contactList"></div>
    <input type="text" id="newContact" placeholder="Add Contact" />
    <button onclick="addContact()">Add</button>
    <button onclick="exportCSV()">Export CSV</button>
    <button onclick="exportPDF()">Export PDF</button>
  </div>
  <div id="details">
    <h2>Contact Details</h2>
    <input type="text" id="contactName" placeholder="Name" />
    <textarea id="contactMessage" placeholder="Message"></textarea>
    <input type="text" id="contactAddress" placeholder="Address" />
    <input type="text" id="contactPhone" placeholder="Phone Number" />
    <input type="text" id="contactEmail" placeholder="Email" />
    <button onclick="saveDetails()">Save</button>
  </div>

  <div id="settingsCog" title="Settings" onclick="toggleSettings()">&#9881;</div>
  <div id="settingsPanel">
    <label>
      <span>Color Blind Mode</span>
      <input type="checkbox" id="colorBlindToggle" onchange="toggleColorBlind()" />
    </label>
    <label>
      <span>Change Language</span>
      <select id="languageSelect" onchange="changeLanguage()">
        <option value="en" selected>English</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <!-- add more languages if you want -->
      </select>
    </label>
    <button onclick="clearAllData()">Clear All Data</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <script>
    let contacts = JSON.parse(localStorage.getItem('rolodexContacts')) || [];
    let selectedContact = null;

    function saveContacts() {
      localStorage.setItem('rolodexContacts', JSON.stringify(contacts));
    }

    function addContact() {
      const newName = document.getElementById('newContact').value.trim();
      if (newName && !contacts.find(c => c.name === newName)) {
        contacts.push({ name: newName, message: '', address: '', phone: '', email: '' });
        saveContacts();
        renderContacts();
        document.getElementById('newContact').value = '';
      }
    }

    function renderContacts() {
      const list = document.getElementById('contactList');
      const filter = document.getElementById('search').value.toLowerCase();
      list.innerHTML = '';
      contacts
        .filter(c => c.name.toLowerCase().includes(filter))
        .forEach((contact, index) => {
          const div = document.createElement('div');
          div.className = 'contact';
          div.innerHTML = `<span>${contact.name}</span><span class="delete-btn" title="Delete contact" onclick="event.stopPropagation(); deleteContact(${index})">Ã—</span>`;
          div.onclick = () => selectContact(index);
          list.appendChild(div);
        });
    }

    function selectContact(index) {
      selectedContact = index;
      document.getElementById('contactName').value = contacts[index].name;
      document.getElementById('contactMessage').value = contacts[index].message;
      document.getElementById('contactAddress').value = contacts[index].address;
      document.getElementById('contactPhone').value = contacts[index].phone;
      document.getElementById('contactEmail').value = contacts[index].email;
    }

    function saveDetails() {
      if (selectedContact !== null) {
        contacts[selectedContact].name = document.getElementById('contactName').value;
        contacts[selectedContact].message = document.getElementById('contactMessage').value;
        contacts[selectedContact].address = document.getElementById('contactAddress').value;
        contacts[selectedContact].phone = document.getElementById('contactPhone').value;
        contacts[selectedContact].email = document.getElementById('contactEmail').value;
        saveContacts();
        renderContacts();
      }
    }

    function deleteContact(index) {
      if (confirm(`Are you sure you want to delete "${contacts[index].name}"?`)) {
        if (selectedContact === index) selectedContact = null;
        contacts.splice(index, 1);
        saveContacts();
        renderContacts();
        clearDetails();
      }
    }

    function clearDetails() {
      document.getElementById('contactName').value = '';
      document.getElementById('contactMessage').value = '';
      document.getElementById('contactAddress').value = '';
      document.getElementById('contactPhone').value = '';
      document.getElementById('contactEmail').value = '';
    }

    function exportCSV() {
      let csv = 'Name,Message,Address,Phone,Email\n';
      contacts.forEach(c => {
        csv += `"${c.name}","${c.message}","${c.address}","${c.phone}","${c.email}"\n`;
      });
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'contacts.csv';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    function exportPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.text('RolodeX Contacts', 10, 10);
      let y = 20;
      contacts.forEach((c, index) => {
        doc.text(`${index + 1}. Name: ${c.name}`, 10, y);
        y += 10;
        doc.text(`   Message: ${c.message}`, 10, y);
        y += 10;
        doc.text(`   Address: ${c.address}`, 10, y);
        y += 10;
        doc.text(`   Phone: ${c.phone}`, 10, y);
        y += 10;
        doc.text(`   Email: ${c.email}`, 10, y);
        y += 10;
        if (y > 270) { doc.addPage(); y = 10; }
      });
      doc.save('contacts.pdf');
    }

    function toggleSettings() {
      const panel = document.getElementById('settingsPanel');
      panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
    }

    function toggleColorBlind() {
      const isChecked = document.getElementById('colorBlindToggle').checked;
      document.body.classList.toggle('colorblind', isChecked);
      localStorage.setItem('colorBlindMode', isChecked);
    }

    function loadColorBlindMode() {
      const saved = localStorage.getItem('colorBlindMode') === 'true';
      document.getElementById('colorBlindToggle').checked = saved;
      document.body.classList.toggle('colorblind', saved);
    }

    function clearAllData() {
      if (confirm('Are you sure you want to clear all contact data? This cannot be undone.')) {
        contacts = [];
        saveContacts();
        renderContacts();
        clearDetails();
      }
    }

    function changeLanguage() {
      const lang = document.getElementById('languageSelect').value;
      alert(`Language changed to: ${lang} (not implemented)`);
    }

    renderContacts();
    loadColorBlindMode();
  </script>
</body>
</html>

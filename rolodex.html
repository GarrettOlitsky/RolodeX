<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RolodeX App</title>
  <style>
    body {
      background-color: #1e1e2f;
      color: #f4f4f4;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      height: 100vh;
      margin: 0;
      transition: background 0.3s, color 0.3s;
    }
    body.light {
      background-color: #f4f4f4;
      color: #1e1e2f;
    }
    #sidebar {
      width: 250px;
      background-color: #292940;
      padding: 10px;
      overflow-y: auto;
    }
    #sidebar.light {
      background-color: #ddd;
    }
    #sidebar h2 {
      text-align: center;
      color: #fff;
    }
    .contact {
      padding: 8px;
      background: #3a3a5c;
      margin: 5px 0;
      cursor: pointer;
      border-radius: 4px;
    }
    .contact:hover {
      background: #505070;
    }
    #details {
      flex-grow: 1;
      padding: 20px;
      background-color: #2e2e42;
    }
    #details.light {
      background-color: #f9f9f9;
    }
    input, textarea, button, select {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: none;
      border-radius: 4px;
    }
    button {
      background-color: #4caf50;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <div id="sidebar">
    <h2>RolodeX</h2>
    <button onclick="toggleTheme()">Toggle Dark/Light</button>
    <input type="text" id="search" placeholder="Search..." oninput="renderContacts()">
    <details>
      <summary>Contact List</summary>
      <div id="contactList"></div>
    </details>
    <input type="text" id="newContact" placeholder="Add Contact">
    <button onclick="addContact()">Add</button>
    <button onclick="exportCSV()">Export CSV</button>
    <button onclick="exportPDF()">Export PDF</button>
    <button onclick="importJSON()">Import JSON</button>
  </div>
  <div id="details">
    <h2>Contact Details</h2>
    <input type="text" id="contactName" placeholder="Name">
    <textarea id="contactMessage" placeholder="Message"></textarea>
    <input type="text" id="contactAddress" placeholder="Address">
    <input type="text" id="contactPhone" placeholder="Phone Number">
    <input type="text" id="contactEmail" placeholder="Email">
    <input type="text" id="contactTags" placeholder="Tags (comma separated)">
    <input type="date" id="contactBirthday" placeholder="Birthday">
    <button onclick="saveDetails()">Save</button>
    <button onclick="deleteContact()">Delete Contact</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

  <script>
    let contacts = JSON.parse(localStorage.getItem('rolodexContacts')) || [];
    let selectedContact = null;

    function saveContacts() {
      localStorage.setItem('rolodexContacts', JSON.stringify(contacts));
    }

    function addContact() {
      const newName = document.getElementById('newContact').value.trim();
      if (newName && !contacts.find(c => c.name === newName)) {
        contacts.push({name: newName, message: '', address: '', phone: '', email: '', tags: '', birthday: ''});
        saveContacts();
        renderContacts();
        document.getElementById('newContact').value = '';
      }
    }

    function renderContacts() {
      const list = document.getElementById('contactList');
      const filter = document.getElementById('search').value.toLowerCase();
      list.innerHTML = '';
      contacts.filter(c => c.name.toLowerCase().includes(filter))
              .forEach((contact, index) => {
        const div = document.createElement('div');
        div.className = 'contact';
        div.innerText = contact.name;
        div.onclick = () => selectContact(index);
        list.appendChild(div);
      });
    }

    function selectContact(index) {
      selectedContact = index;
      const c = contacts[index];
      document.getElementById('contactName').value = c.name;
      document.getElementById('contactMessage').value = c.message;
      document.getElementById('contactAddress').value = c.address;
      document.getElementById('contactPhone').value = c.phone;
      document.getElementById('contactEmail').value = c.email;
      document.getElementById('contactTags').value = c.tags;
      document.getElementById('contactBirthday').value = c.birthday;
    }

    function saveDetails() {
      if (selectedContact !== null) {
        const c = contacts[selectedContact];
        c.name = document.getElementById('contactName').value;
        c.message = document.getElementById('contactMessage').value;
        c.address = document.getElementById('contactAddress').value;
        c.phone = document.getElementById('contactPhone').value;
        c.email = document.getElementById('contactEmail').value;
        c.tags = document.getElementById('contactTags').value;
        c.birthday = document.getElementById('contactBirthday').value;
        saveContacts();
        renderContacts();
      }
    }

    function deleteContact() {
      if (selectedContact !== null && confirm('Are you sure you want to delete this contact?')) {
        contacts.splice(selectedContact, 1);
        selectedContact = null;
        saveContacts();
        renderContacts();
        clearDetails();
      }
    }

    function clearDetails() {
      document.getElementById('contactName').value = '';
      document.getElementById('contactMessage').value = '';
      document.getElementById('contactAddress').value = '';
      document.getElementById('contactPhone').value = '';
      document.getElementById('contactEmail').value = '';
      document.getElementById('contactTags').value = '';
      document.getElementById('contactBirthday').value = '';
    }

    function exportCSV() {
      let csv = 'Name,Message,Address,Phone,Email,Tags,Birthday\n';
      contacts.forEach(c => {
        csv += `"${c.name}","${c.message}","${c.address}","${c.phone}","${c.email}","${c.tags}","${c.birthday}"\n`;
      });
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'contacts.csv';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    function exportPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.text('RolodeX Contacts', 10, 10);
      let y = 20;
      contacts.forEach((c, i) => {
        doc.text(`${i+1}. Name: ${c.name}`, 10, y); y += 10;
        doc.text(`   Message: ${c.message}`, 10, y); y += 10;
        doc.text(`   Address: ${c.address}`, 10, y); y += 10;
        doc.text(`   Phone: ${c.phone}`, 10, y); y += 10;
        doc.text(`   Email: ${c.email}`, 10, y); y += 10;
        doc.text(`   Tags: ${c.tags}`, 10, y); y += 10;
        doc.text(`   Birthday: ${c.birthday}`, 10, y); y += 10;
      });
      doc.save('contacts.pdf');
    }

    function importJSON() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.json';
      input.onchange = e => {
        const reader = new FileReader();
        reader.onload = () => {
          contacts = JSON.parse(reader.result);
          saveContacts();
          renderContacts();
        };
        reader.readAsText(e.target.files[0]);
      };
      input.click();
    }

    function toggleTheme() {
      document.body.classList.toggle('light');
      document.getElementById('sidebar').classList.toggle('light');
      document.getElementById('details').classList.toggle('light');
    }

    renderContacts();
  </script>
</body>
</html>

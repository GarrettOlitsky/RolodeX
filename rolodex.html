<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RolodeX App</title>
  <style>
    body {
      background-color: #1e1e2f;
      color: #f4f4f4;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      height: 100vh;
      margin: 0;
    }
    #sidebar {
      width: 250px;
      background-color: #292940;
      padding: 10px;
      overflow-y: auto;
    }
    #sidebar h2 {
      text-align: center;
      color: #fff;
    }
    .contact {
      padding: 8px;
      background: #3a3a5c;
      margin: 5px 0;
      cursor: pointer;
      border-radius: 4px;
    }
    .contact:hover {
      background: #505070;
    }
    #details {
      flex-grow: 1;
      padding: 20px;
      background-color: #2e2e42;
    }
    input, textarea, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: none;
      border-radius: 4px;
    }
    button {
      background-color: #4caf50;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <div id="sidebar">
    <h2>Contacts</h2>
    <input type="text" id="search" placeholder="Search..." oninput="renderContacts()">
    <div id="contactList"></div>
    <input type="text" id="newContact" placeholder="Add Contact">
    <button onclick="addContact()">Add</button>
    <button onclick="exportCSV()">Export CSV</button>
    <button onclick="exportPDF()">Export PDF</button>
  </div>

  <div id="details">
    <h2>Contact Details</h2>
    <input type="text" id="contactName" placeholder="Name">
    <textarea id="contactMessage" placeholder="Message"></textarea>
    <input type="text" id="contactAddress" placeholder="Address">
    <input type="text" id="contactPhone" placeholder="Phone Number">
    <input type="text" id="contactEmail" placeholder="Email">
    <button onclick="saveDetails()">Save</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <script>
    let contacts = JSON.parse(localStorage.getItem('rolodexContacts')) || [];
    let selectedContact = null;

    function saveContacts() {
      localStorage.setItem('rolodexContacts', JSON.stringify(contacts));
    }

    function addContact() {
      const newName = document.getElementById('newContact').value.trim();
      if (newName && !contacts.find(c => c.name === newName)) {
        contacts.push({name: newName, message: '', address: '', phone: '', email: ''});
        saveContacts();
        renderContacts();
        document.getElementById('newContact').value = '';
      }
    }

    function renderContacts() {
      const list = document.getElementById('contactList');
      const filter = document.getElementById('search').value.toLowerCase();
      list.innerHTML = '';
      contacts.filter(c => c.name.toLowerCase().includes(filter))
              .forEach((contact, index) => {
        const div = document.createElement('div');
        div.className = 'contact';
        div.innerText = contact.name;
        div.onclick = () => selectContact(index);
        list.appendChild(div);
      });
    }

    function selectContact(index) {
      selectedContact = index;
      document.getElementById('contactName').value = contacts[index].name;
      document.getElementById('contactMessage').value = contacts[index].message;
      document.getElementById('contactAddress').value = contacts[index].address;
      document.getElementById('contactPhone').value = contacts[index].phone;
      document.getElementById('contactEmail').value = contacts[index].email;
    }

    function saveDetails() {
      if (selectedContact !== null) {
        contacts[selectedContact].name = document.getElementById('contactName').value;
        contacts[selectedContact].message = document.getElementById('contactMessage').value;
        contacts[selectedContact].address = document.getElementById('contactAddress').value;
        contacts[selectedContact].phone = document.getElementById('contactPhone').value;
        contacts[selectedContact].email = document.getElementById('contactEmail').value;
        saveContacts();
        renderContacts();
      }
    }

    function exportCSV() {
      let csv = 'Name,Message,Address,Phone,Email\n';
      contacts.forEach(c => {
        csv += `"${c.name}","${c.message}","${c.address}","${c.phone}","${c.email}"\n`;
      });
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'contacts.csv';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    function exportPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.text('RolodeX Contacts', 10, 10);
      let y = 20;
      contacts.forEach((c, index) => {
        doc.text(`${index + 1}. Name: ${c.name}`, 10, y);
        y += 10;
        doc.text(`   Message: ${c.message}`, 10, y);
        y += 10;
        doc.text(`   Address: ${c.address}`, 10, y);
        y += 10;
        doc.text(`   Phone: ${c.phone}`, 10, y);
        y += 10;
        doc.text(`   Email: ${c.email}`, 10, y);
        y += 10;
      });
      doc.save('contacts.pdf');
    }

    renderContacts();
  </script>
</body>
</html>
